{"ast":null,"code":"import _classCallCheck from \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/src/components/Post/Show.js\";\nimport React, { Component } from 'react';\nimport { firebase } from '../../shared/firebase';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport withAuthorization from '../withAuthorization';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ReactPlayer from 'react-player';\nimport './style.css';\n\nfunction copyToClipboard(text) {\n  window.prompt(\"Copy to clipboard: Ctrl(Cmd)+C, Enter\", text);\n}\n\nvar Show =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Show, _Component);\n\n  function Show(props) {\n    var _this;\n\n    _classCallCheck(this, Show);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Show).call(this, props));\n\n    _this.getUsername = function () {\n      var currentUser = firebase.auth().currentUser.email;\n      console.log(currentUser);\n      return currentUser;\n    };\n\n    _this.state = {\n      board: {},\n      key: ''\n    };\n    return _this;\n  }\n\n  _createClass(Show, [{\n    key: \"copyLink\",\n    value: function copyLink() {\n      // console.log(window.location.href);\n      var shareLink = window.location.href;\n      copyToClipboard(shareLink);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var user = firebase.auth().currentUser;\n      var name, email, photoUrl, uid, emailVerified;\n\n      if (user != null) {\n        name = user.displayName;\n        email = user.email;\n        photoUrl = user.photoURL;\n        emailVerified = user.emailVerified;\n        uid = user.uid;\n      }\n\n      var ref = firebase.firestore().collection('forum').doc(this.props.match.params.id);\n      ref.get().then(function (doc) {\n        if (doc.exists) {\n          _this2.setState({\n            board: doc.data(),\n            key: doc.id,\n            isLoading: false,\n            email: email\n          });\n        } else {\n          console.log(\"No such document!\");\n        }\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(id) {\n      var _this3 = this;\n\n      firebase.firestore().collection('forum').doc(id).delete().then(function () {\n        console.log(\"Document successfully deleted!\");\n\n        _this3.props.history.push(\"/home\");\n      }).catch(function (error) {\n        console.error(\"Error removing document: \", error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.email ? \"panel panel-default post-body\" : \"hidden\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"post-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        title: this.state.board.title,\n        subheader: this.state.board.username + \"\\t\" + this.state.board.mtime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), this.state.board.image != \" \" ? React.createElement(\"img\", {\n        className: \"Item_image_show\",\n        src: this.state.board.image,\n        alt: \"Item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }) : React.createElement(\"img\", {\n        className: \"Item_image_show\",\n        alt: \"Item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        component: \"p\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.state.board.description), this.state.board.video != \" \" ? React.createElement(ReactPlayer, {\n        url: this.state.board.video,\n        config: {\n          youtube: {\n            playerVars: {\n              showinfo: 1\n            }\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }) : \"\"), React.createElement(CardActions, {\n        disableActionSpacing: true,\n        className: \"Card-action\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        \"aria-label\": \"Share\",\n        type: \"submit\",\n        onClick: function onClick() {\n          _this4.copyLink();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(ShareIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: this.state.email !== this.state.board.key ? \"hidden\" : \"shown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/Forum_edit/\".concat(this.state.key),\n        className: \"btn btn-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Edit\"), \"\\xA0\", React.createElement(\"button\", {\n        onClick: this.delete.bind(this, this.state.key),\n        className: \"btn btn-delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Delete\")), React.createElement(Link, {\n        to: \"/home\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Back\")))));\n    }\n  }]);\n\n  return Show;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    authUser: state.sessionState.authUser\n  };\n};\n\nvar authCondition = function authCondition(authUser) {\n  return !!authUser;\n};\n\nexport default compose(withAuthorization(authCondition), connect(mapStateToProps))(Show);","map":{"version":3,"sources":["/Users/justin/Desktop/GitHub/CS252/purduetravel/testapp/src/components/Post/Show.js"],"names":["React","Component","firebase","Link","connect","compose","withAuthorization","Card","CardHeader","CardContent","CardActions","IconButton","Typography","ShareIcon","ReactPlayer","copyToClipboard","text","window","prompt","Show","props","getUsername","currentUser","auth","email","console","log","state","board","key","shareLink","location","href","user","name","photoUrl","uid","emailVerified","displayName","photoURL","ref","firestore","collection","doc","match","params","id","get","then","exists","setState","data","isLoading","delete","history","push","catch","error","title","username","mtime","image","description","video","youtube","playerVars","showinfo","copyLink","bind","mapStateToProps","authUser","sessionState","authCondition"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {firebase} from '../../shared/firebase';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport withAuthorization from '../withAuthorization';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport ReactPlayer from 'react-player'\n\nimport './style.css';\n\nfunction copyToClipboard(text) {\n  window.prompt(\"Copy to clipboard: Ctrl(Cmd)+C, Enter\", text);\n}\n\nclass Show extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      board: {},\n      key: '',\n    };\n  }\n\n  copyLink() {\n    // console.log(window.location.href);\n    var shareLink = window.location.href;\n    copyToClipboard(shareLink);\n  }\n\n  getUsername = () => {\n    let currentUser = firebase.auth().currentUser.email;\n    console.log(currentUser)\n    return currentUser\n  }\n\n  componentDidMount() {\n    var user = firebase.auth().currentUser;\n    var name, email, photoUrl, uid, emailVerified;\n\n    if (user != null) {\n      name = user.displayName;\n      email = user.email;\n      photoUrl = user.photoURL;\n      emailVerified = user.emailVerified;\n      uid = user.uid;\n    }\n\n    const ref = firebase.firestore().collection('forum').doc(this.props.match.params.id);\n    ref.get().then((doc) => {\n      if (doc.exists) {\n        this.setState({\n          board: doc.data(),\n          key: doc.id,\n          isLoading: false,\n          email: email,\n        });\n      } else {\n        console.log(\"No such document!\");\n      }\n    });\n  }\n\n  delete(id){\n    firebase.firestore().collection('forum').doc(id).delete().then(() => {\n      console.log(\"Document successfully deleted!\");\n      this.props.history.push(\"/home\")\n    }).catch((error) => {\n      console.error(\"Error removing document: \", error);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className = {this.state.email?\"panel panel-default post-body\":\"hidden\"}>\n          <Card className=\"post-card\">\n             <CardHeader\n              title={this.state.board.title}\n              subheader={this.state.board.username+\"\\t\"+this.state.board.mtime}\n            />\n              {this.state.board.image != \" \"?<img className=\"Item_image_show\" src={this.state.board.image} alt=\"Item\" />:<img className=\"Item_image_show\"  alt=\"Item\" />}\n            <CardContent>\n              <Typography component=\"p\">\n                {this.state.board.description}\n              </Typography>\n              {this.state.board.video!=\" \"?<ReactPlayer url = {\n                this.state.board.video\n              }\n              config = {\n                {\n                  youtube: {\n                    playerVars: {\n                      showinfo: 1\n                    }\n                  },\n                }\n              }\n              />:\"\"}\n              \n            </CardContent>\n            <CardActions disableActionSpacing className=\"Card-action\">\n              <IconButton aria-label=\"Share\" type=\"submit\" onClick={() => {this.copyLink()}}>\n                <ShareIcon />\n              </IconButton>\n              <div className={this.state.email !== this.state.board.key?\"hidden\":\"shown\"}>\n                <Link to={`/Forum_edit/${this.state.key}`} className=\"btn btn-edit\">Edit</Link>&nbsp;\n                <button onClick={this.delete.bind(this, this.state.key)} className=\"btn btn-delete\">Delete</button>\n              </div>\n              <Link to=\"/home\" className=\"btn btn-primary\">Back</Link>\n            </CardActions>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  authUser: state.sessionState.authUser,\n});\n\nconst authCondition = (authUser) => !!authUser;\n\nexport default compose(\n  withAuthorization(authCondition),\n  connect(mapStateToProps)\n)(Show);"]},"metadata":{},"sourceType":"module"}